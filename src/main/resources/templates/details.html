<!DOCTYPE html>
<html lang="en"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/commons::head}">
</head>

<body>
<!-- Spinner Start -->
<div id="spinner"
     class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="sr-only">Loading...</span>
    </div>
</div>

<div th:replace="~{fragments/commons::topbar}">

</div>

<div>
    <nav th:replace="~{fragments/commons::nav}">
    </nav>
</div>

<div class="container-xxl service py-5">
    <div class="container" >
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h6 class="text-primary text-uppercase">// Our Services //</h6>
            <h1 class="mb-5">Explore Our Services</h1>
        </div>
        <div class="row g-4 wow fadeInUp" data-wow-delay="0.3s">
            <div class="col-lg-4">
                <div class="nav w-100 nav-pills me-4">
                    <button class="nav-link w-100 d-flex align-items-center text-start p-4 mb-4 active"
                            data-bs-toggle="pill" data-bs-target="#tab-pane-1" type="button">
                        <i class="fa fa-car-side fa-2x me-3"></i>
                        <h4 class="m-0">Car Details</h4>
                    </button>
                    <button class="nav-link w-100 d-flex align-items-center text-start p-4 mb-4" data-bs-toggle="pill"
                            data-bs-target="#tab-pane-2" type="button">
                        <i class="fa fa-car fa-2x me-3"></i>
                        <h4 class="m-0">Car Repairs</h4>
                    </button>
                    <button class="nav-link w-100 d-flex align-items-center text-start p-4 mb-4" data-bs-toggle="pill"
                            data-bs-target="#tab-pane-3" type="button" >
                        <i class="fa fa-cog fa-2x me-3"></i>
                        <h4 class="m-0">Car Taxes</h4>
                    </button>
                    <a class="nav-link w-100 d-flex align-items-center text-start p-4 mb-4" data-bs-toggle="pill"
                            data-bs-target="#tab-pane-4" type="button" >
                        <i class="fa fa-cog fa-2x me-3"></i>
                        <h4 class="m-0">Book a Service</h4>

                    </a>

                </div>
            </div>
            <div class="col-lg-8">
                <div class="tab-content w-100">
                    <div class="tab-pane fade show active" id="tab-pane-1">
                        <div class="row g-4" th:object="${car}">
                            <div class="col-md-6" style="min-height: 350px;">
                                <div class="position-relative h-100">
                                    <img class="position-absolute img-fluid w-100 h-100" th:src="*{imageUrl}"
                                         style="object-fit: cover;" alt="">
                                </div>
                            </div>
                            <div class="col-md-6" >
                                <h3 class="mb-3" th:text="*{summary()}">Summary</h3>
                                <p class="mb-4" th:text="*{vehicleType}">Vehicle Type</p>
                                <th:block>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Make: </span>
                                        <th:block th:text="*{make}">Make</th:block>
                                    </p>

                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Model: </span>
                                        <th:block th:text="*{model}">Model</th:block>
                                    </p>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Mileage: </span>
                                        <th:block th:text="*{kilometers}">Mileage</th:block>
                                    </p>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Registration Number: </span>
                                        <th:block th:text="*{registrationNumber}">Number</th:block>
                                    </p>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• VIN: </span>
                                        <th:block th:text="*{vin}">VIN</th:block>
                                    </p>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Engine: </span>
                                        <th:block th:text="*{fuelType}">Petrol</th:block>
                                    </p>
                                    <a href="" class="btn btn-primary py-3 px-5 mt-3">Update Mileage??<i
                                            class="fa fa-arrow-right ms-3"></i></a>
                                </th:block>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab-pane-2">
                        <div class="row g-4">
                            <div class="col-md-6" style="min-height: 350px;">
                                <div class="position-relative h-100">
                                    <img class="position-absolute img-fluid w-100 h-100" src="/images/service-2.jpg"
                                         style="object-fit: cover;" alt="">
                                </div>
                            </div>
                            <th:block th:if="${lastRepair != null}">
                            <div class="col-md-6" th:object="${lastRepair}">
                                <h3 class="mb-3" >Your last vehicle repair</h3>
                                <h3 class="mb-3" th:text="*{repair}">Your last vehicle repair</h3>
                                <p class="mb-4" th:text="*{description}"></p>
                                <p><i class="fa fa-check text-success me-3"></i>
                                    <span>• Repair Date: </span>
                                    <th:block th:text="*{repairDate}">123</th:block>
                                </p>

                                <p><i class="fa fa-check text-success me-3"></i>
                                    <span>• Kilometers: </span>
                                    <th:block th:text="*{mileage}">Date</th:block>
                                </p>
                                <p><i class="fa fa-check text-success me-3"></i>
                                    <span>• Service Name: </span>
                                    <th:block th:text="*{service.name}">Name</th:block>
                                </p>
                                <a th:href="@{/repair/{carUUID}(carUUID=${car.getId()})}" class="btn btn-primary py-3 px-5 mt-3">See All Repairs<i
                                        class="fa fa-arrow-right ms-3"></i></a>

                            </div>
                            </th:block>
                            <th:block th:unless="${lastRepair != null}">
                                <div class="col-md-6" >
                                    <h3 class="mb-3" >Your last vehicle repair</h3>
                                    <p class="mb-4" > No repairs yet</p>

<!--                                    <a  class="btn btn-primary py-3 px-5 mt-3">Book Repair<i-->
<!--                                            class="fa fa-arrow-right ms-3"></i></a>-->

                                </div>
                            </th:block>

                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab-pane-3">
                        <div class="row g-4">
                            <div class="col-md-6" style="min-height: 350px;">
                                <div class="position-relative h-100">
                                    <img class="position-absolute img-fluid w-100 h-100" src="/images/service-3.jpg"
                                         style="object-fit: cover;" alt="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h3 class="mb-3">Tax //todo</h3>
                                <p class="mb-4">TODO</p>
                                <th:block >
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Repair Date</span>
                                        <th:block >123</th:block>
                                    </p>

                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Kilometers</span>
                                        <th:block >Date</th:block>
                                    </p>
                                    <p><i class="fa fa-check text-success me-3"></i>
                                        <span>• Description</span>
                                        <th:block >Date</th:block>
                                    </p>
                                    <a href="" class="btn btn-primary py-3 px-5 mt-3">Read More<i
                                            class="fa fa-arrow-right ms-3"></i></a>
                                </th:block>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="tab-pane-4" >
                        <div class="row g-4" >
                            <div class="col-md-6" style="min-height: 350px;">
                                <div class="position-relative h-100">
                                    <img class="position-absolute img-fluid w-100 h-100" src="/images/service-4.jpg"
                                         style="object-fit: cover;" alt="">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <form id="myForm" th:method="POST" th:action="@{/car/repair}" th:object="${addCarRepairDto}">
                                    <div class="row g-3">
                                        <div class="col-12 col-sm-6" >
                                            <input type="text" class="form-control border-0"
                                                   th:name="fullName"
                                                   th:value="${user.fullName()}"
                                                   style="height: 55px;">
                                        </div>
                                        <div class="col-12 col-sm-6" >
                                            <input type="email" class="form-control border-0"
                                                    th:name="email"
                                                   th:value="${user.email}"
                                                   style="height: 55px;">
                                        </div>
                                        <div class="col-12 col-sm-6" >
                                            <input type="text" class="form-control border-0"
                                                   th:name="make"
                                                   th:value="${car.make}"
                                                   style="height: 55px;">
                                        </div>
                                        <div class="col-12 col-sm-6" >
                                            <input type="text" class="form-control border-0"
                                                   th:name="registrationNumber"
                                                   th:value="${car.registrationNumber}"
                                                   style="height: 55px;">
                                        </div>
                                        <div class="col-12 col-sm-6" >
                                            <input type="text" class="form-control border-0"
                                                   th:name="kilometers"
                                                   th:value="${car.kilometers}"
                                                   style="height: 55px;">
                                        </div>
                                        <div class="col-12 col-sm-6">
                                            <select class="form-select border-0" style="height: 55px;" th:name="repair">
                                                <option selected th:name="repair">Type Repair</option>
                                                <option th:each="r : ${T(com.vehicleassistancediary.model.entity.enums.CarRepairEnum).values()}" th:value="${r}" th:text="${r}" >Service 1</option>

                                            </select>
                                        </div>
                                        <div class="col-12 col-sm-6">
                                            <select class="form-select border-0" style="height: 55px;" th:name="service">
                                                <option selected >Select A Service</option>
                                                <option th:each="s : ${allServices}" th:object="${s}" th:value="${s.name}" th:text="${s.name}" >Service 1</option>

                                            </select>
                                        </div>
                                        <div class="col-12 col-sm-6">
                                            <div class="date" id="date1" data-target-input="nearest">
                                                <input type="text"
                                                        th:name="repairDate"
                                                       class="form-control border-0 datetimepicker-input"
                                                       placeholder="Service Date" data-target="#date1"
                                                       data-toggle="datetimepicker"
                                                       style="height: 55px;">
                                            </div>
                                        </div>
                                        <div class="col-12">
                                            <textarea class="form-control border-0"
                                                      th:name="description"
                                                      placeholder="Special Request"></textarea>
                                        </div>
                                        <div class="col-12">
                                            <button class="btn btn-secondary w-100 py-3" name="btnSubmit" type="submit"  value="Book Now">Book Now</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <h2 class="text-center text-white mt-5">Details</h2>
    <div th:object="${car}" class="offers row mx-auto d-flex flex-row justify-content-center">
        <div class="offer card col-sm-2 col-md-3  col-lg-4 m-1 p-0">

            <div class="card-body pb-1">
                <h5 class="card-title" th:text="*{summary()}">Make Model and Year</h5>
            </div>
            <ul class="offer-details list-group list-group-flush">
                <li class="list-group-item">

                    <div class="card-text">
                        <span>• Make</span>
                        <th:block th:text="*{make}">Make</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Model</span>
                        <th:block th:text="*{model}">Model</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Year</span>
                        <th:block th:text="*{year}">Year</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Registration Number</span>
                        <th:block th:text="*{registrationNumber}">Registration Number</th:block>
                    </div>
                    <div class="card-text">
                        <span>• VIN</span>
                        <th:block th:text="*{vin}">VIN</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Mileage</span>
                        <th:block th:text="*{kilometers}">Mileage</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Vehicle Type</span>
                        <th:block th:text="*{vehicleType}">CAR</th:block>
                    </div>
                    <div class="card-text">
                        <span>• Engine</span>
                        <th:block th:text="*{fuelType}">PETROL</th:block>
                    </div>
                    <!--          <div class="card-text">-->
                    <!--            <span>• Transmission type</span>-->
                    <!--            <th:block th:text="*{transmission}">TRANSMISSION</th:block>-->
                    <!--          </div>-->

                    <div class="card-text"><span>• Offer created - TODO</span></div>
                    <div class="card-text"><span>• Offer modified - TODO</span></div>
                    <div class="card-text"><span>• Seller - TOD</span></div>
                </li>
            </ul>
            <div class="card-body" sec:authorize="isAuthenticated()">
                <form th:method="delete"
                      th:action="@{/car/{carUUID}(carUUID=*{id})}">
                    <input type="submit" value="Delete" class="link card-link"/>
                </form>
            </div>
        </div>
        <div class="offer card col-sm-2 col-md-3  col-lg-4 m-1 p-0">
            <img src="/images/repair-log.jpg" class="card-img-top" alt="Repair image">
            <a th:href="@{/repair/{carUUID}(carUUID=*{id})}" class="btn btn-primary py-3 px-5 mt-3">Go to you car logs<i
                    class="fa fa-arrow-right ms-3"></i></a>
            <img src="/images/taxes-log.png" class="card-img-top" alt="Taxes image">
            <a th:href="@{/taxes/{carUUID}(carUUID=*{id})}" class="btn btn-primary py-3 px-5 mt-3">Go to you car logs<i
                    class="fa fa-arrow-right ms-3"></i></a>
        </div>

    </div>
</div>
<div>
    <footer th:replace="~{fragments/commons::footer}">

    </footer>
</div>
<script>
    var pinnedData = getPinnedData();

    // Populate the form fields with the pinned data
    document.getElementsByName("fullName")[0].value = pinnedData.fullName;
    document.getElementsByName("email")[0].value = pinnedData.email;
    document.getElementsByName("make")[0].value = pinnedData.make;
    document.getElementsByName("registrationNumber")[0].value = pinnedData.registrationNumber;
    document.getElementsByName("repair")[0].value = pinnedData.repair;
    document.getElementsByName("service")[0].value = pinnedData.service;
    document.getElementsByName("repairDate")[0].value = pinnedData.repairDate;
    document.getElementsByName("description")[0].value = pinnedData.description;


    document.getElementById("myForm").submit();
</script>
<!-- JavaScript Libraries -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/lib/wow/wow.min.js"></script>
<script src="/lib/easing/easing.min.js"></script>
<script src="/lib/waypoints/waypoints.min.js"></script>
<script src="/lib/counterup/counterup.min.js"></script>
<script src="/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/lib/tempusdominus/js/moment.min.js"></script>
<script src="/lib/tempusdominus/js/moment-timezone.min.js"></script>
<script src="/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

<!-- Template Javascript -->
<script src="/js/main.js"></script>


</body>
</html>